# doc: https://github.com/serverless-components/tencent-scf/blob/master/docs/configure.md

inputs:
  src:
    type: src
  type:
    type: string
    message: "type 无法识别,当前只支持 event 和 web"
    allow:
      - event
      - web
  name:
    type: string
    rules:
      - regex: '^[A-Za-z][\w-_]*[A-Za-z0-9]$'
        message: "只能包含字母、数字、下划线、连字符，以字母开头，以数字或字母结尾"
      - min: 2
        message: "长度不能小于2"
      - max: 60
        message: "长度不能大于60"
  handler:
    type: string
  runtime:
    type: string
    message: "运行时选择错误，请参考https://cloud.tencent.com/document/product/583/54977"
    allow:
      - Python2.7
      - Python3.6
      - Nodejs6.10
      - Nodejs8.9
      - Nodejs10.15
      - Nodejs12.16
      - Php5
      - Php7
      - Go1
      - Java8
      - CustomRuntime
  region:
    type: string
    message: "地区选择错误，https://cloud.tencent.com/document/api/583/17238#.E5.9C.B0.E5.9F.9F.E5.88.97.E8.A1.A8"
    allow:
      - ap-beijing
      - ap-chengdu
      - ap-chongqing
      - ap-guangzhou
      - ap-hongkong
      - ap-mumbai
      - ap-seoul
      - ap-shanghai
      - ap-shanghai-fsi
      - ap-shenzhen-fsi
      - ap-singapore
      - ap-tokyo
      - eu-frankfurt
      - na-siliconvalley
      - na-toronto
  memorySize:
    type: number
    min: 64
    max: 3072
    message: "内存大小选择错误，可选范围 64、128MB-3072MB，并且以 128MB 为阶梯"
    allow:
      - 64
      - 128
      - 256
      - 384
      - 512
      - 640
      - 768
      - 896
      - 1024
      - 1152
      - 1280
      - 1408
      - 1536
      - 1664
      - 1792
      - 1920
      - 2048
      - 2176
      - 2304
      - 2432
      - 2560
      - 2688
      - 2816
      - 2944
      - 3072
  environment:
    type: object
    keys:
      variables:
        type: object
  vpcConfig:
    type: object
    keys:
      vpcId:
        type: string
      subnetId:
        type: string
  deadLetter:
    type: object
    keys:
      Type:
        type: string
        required: true
      Name:
        type: string
        required: true
  timeout:
    type: number
    min: 1
    message: "数字类型，最小值为1"
  initTimeout:
    type: number
    min: 1
    max: 30
    message: "函数初始化超时时间，单位为秒，可选值范围 1-30 秒"
  publicAccess:
    type: boolean
  eip:
    type: boolean
  image:
    type: object
    keys:
      imageUrl:
        type: string
        required: true
  installDependency:
    type: boolean
  asyncRunEnable:
    type: boolean
  l5Enable:
    type: boolean
  tags:
    type: object
  layers:
    type: array
    items:
      - type: object
        keys:
          name:
            type: string
            required: true
          version:
            type: number
            required: true
