# component doc: https://github.com/serverless-components/tencent-http/blob/master/docs/configure.md

inputs:
  type:
    type: string
    message: '不支持当前类型，支持类型有：【 event , web 】'
    allow:
      - event
      - web
  region:
    type: string
    message: >-
      不支持指定的地域 ，请查看腾讯地域列表获取所有支持的地域信息。https://cloud.tencent.com/document/api/583/17238#.E5.9C.B0.E5.9F.9F.E5.88.97.E8.A1.A8
    allow:
      - ap-beijing
      - ap-chengdu
      - ap-chongqing
      - ap-guangzhou
      - ap-hongkong
      - ap-mumbai
      - ap-seoul
      - ap-shanghai
      - ap-shanghai-fsi
      - ap-shenzhen-fsi
      - ap-singapore
      - ap-tokyo
      - eu-frankfurt
      - na-siliconvalley
      - na-toronto
  faas:
    type: object
    keys:
      framework:
        type: string
        required: true
        allow:
          - express
          - koa
          - egg
          - nextjs
          - nuxtjs
          - nestjs
          - flask
          - django
          - laravel
        message: >-
          不支持此Web框架，请查看 http 组件支持的框架列表。
          https://cn.serverless.com/framework/docs-components#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BA%94%E7%94%A8
      runtime:
        type: string
        message: '不支持当前运行时，请参考腾讯语言和运行时支持信息。https://cloud.tencent.com/document/product/583/54977'
        allow:
          - Python2.7
          - Python3.6
          - Nodejs6.10
          - Nodejs8.9
          - Nodejs10.15
          - Nodejs12.16
          - Php5
          - Php7
          - Go1
          - Java8
          - CustomRuntime
      name:
        type: string
        regex: '^[A-Za-z][\w-_]{0,58}[A-Za-z0-9]$'
        message: 名称不合法，只能包含字母、数字、下划线、连字符，以字母开头，以数字或字母结尾，2~60 个字符
      environment:
        type: array
        items:
          - type: object
            keys:
              key:
                type: string
              value:
                type: string
      vpc:
        type: object
        keys:
          vpcId:
            type: string
          subnetId:
            type: string
      timeout:
        type: number
        min: 1
        message: '超时时间无效，超时时间不能小于 1（秒）'
      memorySize:
        type: number
        min: 64
        message: 内存配置无效，内存最小不能小于 64（MB）
      tags:
        type: array
        items:
          - type: object
            keys:
              key:
                type: string
                required: true
              value:
                type: string
                required: true
  apigw:
    type: object
    keys:
      id:
        type: string
      name:
        type: string
        regex: '^[A-Za-z][\w-_]{0,48}[A-Za-z0-9]$'
        message: 名称不合法，只能包含字母、数字、下划线、连字符，以字母开头，以数字或字母结尾，2~50 个字符
      protocols:
        type: array
        items:
          - type: string
            message: '不支持该协议，支持的协议有：【 http , https 】'
            allow:
              - http
              - https
      environment:
        type: string
        message: '不支持该环境，支持的环境有：【  test , prepub , release 】'
        allow:
          - test
          - prepub
          - release
      usagePlan:
        type: object
        keys:
          usagePlanId:
            type: string
          usagePlanName:
            type: string
          usagePlanDesc:
            type: string
          maxRequestNum:
            type: number
      auth:
        type: object
        keys:
          secretName:
            type: string
          secretIds:
            type: string
      customDomains:
        type: array
        items:
          - type: object
            keys:
              domain:
                type: string
                required: true
              protocol:
                type: array
                items:
                  - type: string
                    message: '不支持该协议，支持的协议有：【 http , https 】'
                    allow:
                      - http
                      - https
              pathMappingSet:
                type: array
                items:
                  - type: object
                    keys:
                      path:
                        type: string
                        required: true
                      environment:
                        type: string
                        required: true
                        message: '不支持该环境，支持的环境有：【  test , prepub , release 】'
                        allow:
                          - test
                          - prepub
                          - release
      tags:
        type: array
        items:
          - type: object
            keys:
              key:
                type: string
                required: true
              value:
                type: string
                required: true
      enableCORS:
        type: boolean
      isDisabled:
        type: boolean
      api:
        type: object
        keys:
          name:
            type: string
            regex: '^[A-Za-z][\w-_]{0,48}[A-Za-z0-9]$'
            message: 名称不合法，只能包含字母、数字、下划线、连字符，以字母开头，以数字或字母结尾，2~50 个字符
          timeout:
            type: number
            min: 1
            message: '超时时间无效，超时时间不能小于 1（秒）'
          cors:
            type: boolean
          qualifier:
            type: string
      ignoreUpdate:
        type: boolean
  assets:
    type: object
    keys:
      cos:
        type: object
        required: true
        keys:
          bucket:
            type: string
            required: true
          sources:
            type: array
            items:
              - type: object
                keys:
                  src:
                    type: string
                    required: true
      cdn:
        type: object
        keys:
          domain:
            type: string
            required: true
          autoRefresh:
            type: boolean
          refreshType:
            type: string
            message: 不支持该刷新类型，支持的刷新类型有：【 delete（刷新全部资源），flush（刷新变更资源）】
            allow:
              - delete
              - flush
          forceRedirect:
            type: object
            keys:
              switch:
                type: string
                message: '启用状态配置错误，支持的配置有：【 on（启用强制跳转），off（禁用强制跳转） 】'
                allow:
                  - 'on'
                  - 'off'
              redirectType:
                type: string
                message: 不支持该强制跳转类型，支持的类型有：【 http （强制 http 跳转）, https （强制 https 跳转）】
                allow:
                  - http
                  - https
              redirectStatusCode:
                type: number
                message: 不支持该状态码，支持的类型有 【 301 ， 302 】
                allow:
                  - 301
                  - 302
          https:
            type: object
            keys:
              certId:
                type: string
                required: true
              http2:
                type: string
                required: true
                message: 启用状态配置错误，支持的配置有：【 on（启用HTTP2），off（禁用HTTP2） 】
                allow:
                  - 'on'
                  - 'off'
          area:
            type: string
            message: >-
              不支持该加速区域，支持的区域有【 mainland（大陆），overseas（海外），global（全球）】
            allow:
              - mainland
              - overseas
              - global
          ignoreUpdate:
            type: boolean
