# doc: https://github.com/serverless-components/tencent-multi-scf/blob/master/docs/configure.md

inputs:
  src:
    required: true
  region:
    type: string
  runtime:
    type: string
    message: "运行时选择错误，请参考https://cloud.tencent.com/document/product/583/54977"
    allow:
      - Python2.7
      - Python3.6
      - Nodejs6.10
      - Nodejs8.9
      - Nodejs10.15
      - Nodejs12.16
      - Php5
      - Php7
      - Go1
      - Java8
      - CustomRuntime
  memorySize:
    type: number
    min: 64
    max: 3072
    message: "内存大小选择错误，可选范围 64、128MB-3072MB，并且以 128MB 为阶梯"
    allow:
      - 64
      - 128
      - 256
      - 384
      - 512
      - 640
      - 768
      - 896
      - 1024
      - 1152
      - 1280
      - 1408
      - 1536
      - 1664
      - 1792
      - 1920
      - 2048
      - 2176
      - 2304
      - 2432
      - 2560
      - 2688
      - 2816
      - 2944
      - 3072
  timeout:
    type: number
    min: 1
    message: "数字类型，最小值为1"
  functions:
    type: object
    keys:
      index:
        type: object
        keys:
          handler:
            required: true
            type: string
          type:
            type: string
            allow:
              - event
              - web
            message: "type 无法识别,当前只支持 event 和 web"
          name:
            type: string
            message: "只能包含字母、数字、下划线、连字符，以字母开头，以数字或字母结尾，2~60 个字符"
            regex: '^[A-Za-z][\w-_]{0,58}[A-Za-z0-9]$'
          src:
            type: string
          memorySize:
            type: number
            min: 64
            max: 3072
            message: "内存大小选择错误，可选范围 64、128MB-3072MB，并且以 128MB 为阶梯"
            allow:
              - 64
              - 128
              - 256
              - 384
              - 512
              - 640
              - 768
              - 896
              - 1024
              - 1152
              - 1280
              - 1408
              - 1536
              - 1664
              - 1792
              - 1920
              - 2048
              - 2176
              - 2304
              - 2432
              - 2560
              - 2688
              - 2816
              - 3072
          timeout:
            type: number
            min: 1
            max: 900
            message: "timeout 取值范围是 [1, 900]"
          environments:
            type: array
            items:
              - type: object
                keys:
                  key:
                  type: string
                  required: true
                value:
                  type: string
                  required: true
          layers:
            type: array
            items:
              - type: object
                keys:
                  name:
                    type: string
                    required: true
                  version:
                    type: number
                    required: true
          tags:
            type: array
            items:
              - type: object
                keys:
                  key:
                    type: string
                    required: true
                  value:
                    type: string
                    required: true
          cfs:
            type: array
            items:
              - type: object
                keys:
                  cfsid:
                    type: string
                    required: true
                    message: "文件系统实例 id 必填"
                  mountInsId:
                    required: true
                    type: string
                    message: "文件系统挂载点 id 必填"
                  localMountDir:
                    required: true
                    type: string
                    message: '本地挂载点，云函数目录 为必填'
                  remoteMountDir:
                    type: string
                    required: true
                    message: "远程挂载点，CFS 目录 为必填"
                    type: string
          image:
            type: object
            keys:
              imageUrl:
                type: required
                type: string
